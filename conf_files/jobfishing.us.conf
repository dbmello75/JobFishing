<VirtualHost *:80>
    ServerName www.jobfishing.us
    ServerAlias jobfishing.us
    Redirect permanent / https://jobfishing.us/
</VirtualHost>

<VirtualHost *:443>
    ServerName www.jobfishing.us
    ServerAlias jobfishing.us
    DocumentRoot /var/www/jobfishing-frontend/

    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/jobfishing.us_ssl_certificate.cer
    SSLCertificateChainFile /etc/apache2/ssl/jobfishing.us_intermediate.cer
    SSLCertificateKeyFile /etc/apache2/ssl/jobfishing.us_private_key.key

    # Headers de seguran√ßa
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "SAMEORIGIN"
    Header always set X-XSS-Protection "1; mode=block"

    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto "https"
    ProxyTimeout 60

    # Proxies para backend FastAPI
    ProxyPass "/anuncio/" "http://127.0.0.1:8000/anuncio/"
    ProxyPassReverse "/anuncio/" "http://127.0.0.1:8000/anuncio/"

    ProxyPass "/r/" "http://127.0.0.1:8000/r/"
    ProxyPassReverse "/r/" "http://127.0.0.1:8000/r/"

    ProxyPass "/states" "http://127.0.0.1:8000/states"
    ProxyPassReverse "/states" "http://127.0.0.1:8000/states"

    ProxyPass "/regions" "http://127.0.0.1:8000/regions"
    ProxyPassReverse "/regions" "http://127.0.0.1:8000/regions"

    ProxyPass "/ads/" "http://127.0.0.1:8000/ads/"
    ProxyPassReverse "/ads/" "http://127.0.0.1:8000/ads/"

    ProxyPass "/groups/" "http://127.0.0.1:8000/groups/"
    ProxyPassReverse "/groups/" "http://127.0.0.1:8000/groups/"


    <Directory /var/www/jobfishing-frontend/>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/jobfishing_error.log
    CustomLog ${APACHE_LOG_DIR}/jobfishing_access.log combined
</VirtualHost>
