<VirtualHost *:80>
    ServerName auto.jobfishing.us
    Redirect permanent / https://auto.jobfishing.us/
</VirtualHost>

<VirtualHost *:443>
    ServerName auto.jobfishing.us

    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/jobfishing.us_ssl_certificate.cer
    SSLCertificateChainFile /etc/apache2/ssl/jobfishing.us_chain.cer
    SSLCertificateKeyFile /etc/apache2/ssl/jobfishing.us_private_key.key

	RewriteEngine On
	RewriteCond %{HTTP:Upgrade} =websocket [NC]
	RewriteRule /(.*)           ws://127.0.0.1:5678/$1 [P,L]
	RewriteCond %{HTTP:Upgrade} !=websocket [NC]
	RewriteRule /(.*)           http://127.0.0.1:5678/$1 [P,L]
	ProxyPassReverse /          http://auto.jobfishing.us

    ErrorLog ${APACHE_LOG_DIR}/n8n_ws_error.log
    CustomLog ${APACHE_LOG_DIR}/n8n_ws_access.log combined
</VirtualHost>
